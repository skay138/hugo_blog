---
title: "결제 시스템 ERD 설계"
description: 모의 결제 시스템 ERD 설계
slug: payment-system-erd
date: 2024-05-06 00:00:05+0900
image: cover.png
categories:
  - Backend Studies/etc
tags:
  - ERD
  - database
---

## 요구사항

1. 상품:
   - 하나 이상의 이미지, 색상, 사이즈를 가지고 있을 수 있다.
   - 쿠폰과 별도로 기본 할인 정책을 가지고 있다.
2. 쿠폰:
   - 종류: 비율 할인, 고정할인, 무료 배송
   - 중복가능 여부에 따라 비율 할인 시 추가 할인(ADDITONAL)이 있어야 한다.
3. 결제:
   - 여러 상품을 한번에 결제 할 수 있어야 한다.
   - 장바구니 기능이 있어야 한다.
   - PG 시스템을 이용

## ERD

![결제 시스템(논리)](payment_system_v2.png)

![결제 시스템(물리)](<payment_system_v2(physical).png>)

다대다 관계는 관계 테이블로 구성했습니다.

### 예상 시나리오

1. 장바구니 확인 및 결제 페이지 진입
2. 사용자-쿠폰 테이블에서 적용 가능한 쿠폰 확인
3. 사용자 결제 요청 시 결제 및 '결제-쿠폰', '상품-결제' 정보 등록
   - 정보 등록은 PG 시스템 처리 이후가 될 수도 있습니다.
4. PG 시스템으로 결제 요청
5. PG 시스템 반환값 확인 및 결제 종료
